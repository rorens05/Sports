<p id="notice"><%= notice %></p>

<h1>
  <%= @game.name %>
</h1><hr>

<p>
  <strong>Event:</strong>
  <%= @game.event.name %>
</p>

<p>
  <strong>Game type:</strong>
  <%= @game.game_type %>
</p>

<p>
  <strong>Sport:</strong>
  <%= @game.sport.name %>
</p>

<p>
  <strong>Schedule:</strong>
  <%= format_time(@game.schedule) %>
</p>
<p>
  <strong>Status:</strong>
  <%= @game.status %>
</p>

<p>
  <strong>Created by:</strong>
  <% if @game.created_by %>
    <%= @game.created_by.username %>
  <% end %>
</p>

<p>
  <strong>Last Updated By:</strong>
  <% if @game.last_updated_by %>
    <%= @game.last_updated_by.username %>
  <% end %>
</p>

<%= link_to 'Edit', edit_game_path(@game) %> |
<%= link_to 'Back', games_path %> | 
<%= link_to 'Destroy', @game, method: :delete, data: { confirm: 'Are you sure?' } %> | 
<%= link_to 'View Realtime', "/live_view/single_game?game_id=" + @game.id.to_s %>| 
<%= link_to 'Display Result', "/live_view/result?game_id=" + @game.id.to_s %>

<hr>
<h1>Game Players</h1><br>

<table>
  <thead>
    <th>Team</th>
    <th>Score</th>
    <th>Status</th>
  </thead>

  <% for  x  in 0..(@contestants.size - 1) %>
    <% if @contestants[x].team %>
      <tr>
        <td><%= link_to @contestants[x].team.name, @contestants[x].team %></td>
        <td><%= @contestants[x].score %></td>
        <td><%= display_winner(@ranks[x]) %></td>
      </tr>
    <% else %>
      <tr>
        <td><span style="color: gray">DELETED</span></td>
        <td><%= @contestants[x].score %></td>
        <td><%= display_winner(@ranks[x]) %></td>
      </tr>
    <% end %>
  <% end %>
  
</table>
<hr><br>
<h1>Statistics</h1><br>
<div class="row">
  <% @contestants.each do |contestant| %>
    
    <div class="col-sm-6"><br>
      <h3><%= contestant.team.name %> Statistics</h3>

      <table>
        <thead>
          <tr>
            <th>Player</th>
            <th>Details</th>
            <th></th>
          </tr>
        </thead>

        <tbody>
          <% contestant.statistics.each do |statistic| %>
            <tr>
              <td><%= image_tag validate_image(statistic.player.image) %><%= statistic.player.name %></td>
              <td><pre><%= statistic.details %></pre></td>
              <td><%= link_to 'Delete', statistic, method: :delete, data: { confirm: 'Are you sure?' } %></td>
            </tr>
          <% end %>
        </tbody>
      </table>
      
      <% new_statistic_1 = Statistic.new %>
      <% new_statistic_1.contestant_team = contestant %>
      <br>
      <%= render 'new_statistics', statistic: new_statistic_1%>
    </div>
  <% end %>
</div>